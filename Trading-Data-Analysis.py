import requests
import matplotlib.pyplot as plt
from matplotlib.pyplot import figure


#  DATOS

apiKey = "W4Z9JQF3906F4B25"

# Idealmente cambiar esto a api de yahoo
# Datos del valor actual de la crypto
def dataActual(crypto):
    cryptoData = {}
    cer = (requests.get(f"https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency={crypto.upper()}&to_currency=USD&apikey={apiKey}").json())["Realtime Currency Exchange Rate"]

    precioActual = cer["5. Exchange Rate"]
    tiempo = cer["6. Last Refreshed"]

    cryptoData.update({
        "precio actual": precioActual,
        "tiempo": tiempo,
    })

    return cryptoData

# Datos del valor en un rango de tiempo (OHLC)
def dataDiario(crypto, intervalo, rango):
    url = f"https://yahoo-finance-low-latency.p.rapidapi.com/v8/finance/chart/{crypto}"
    querystring = {"interval":{intervalo},"range":{rango},"events":"div,split"}
    headers = {
        'x-rapidapi-key': "4393e819bamsh268b084ca3a4710p1d2e61jsn787c57e571f9",
        'x-rapidapi-host': "yahoo-finance-low-latency.p.rapidapi.com"
    }

    daily = (requests.request("GET", url, headers=headers, params=querystring).json())["chart"]["result"][0]["indicators"]["quote"][0]

    dias = {}
    diaActual = len(daily["open"])
    for i in range(diaActual):
        dias.update({
            f"dia {diaActual - i - 1}": {
                "open": daily["open"][i],
                "high": daily["high"][i],
                "low": daily["low"][i],
                "close": daily["close"][i]
            }
        })

    return dias

# Diccionario con todos los datos de BITCOIN
btc = {}
# btc.update({
#     "Actual": dataActual("btc"),
#     "Diario": dataDiario("BTC-USD", "15m", "3d")

# })

print(btc)

# Diccionario con todos los datos de ETHERIUM
# eth = {}
# eth.update({
#     "Actual": dataActual("eth"),
#     "Diario": dataDiario("ETH-USD", "1d", "100d")
# })


# ---------------------------------

# Calculo de puntas

btc = {'Actual': {'precio actual': '38212.59000000', 'tiempo': '2021-05-20 03:18:01'}, 'Diario': {'dia 59': {'open': 36591.3828125, 'high': 37033.96484375, 'low': 32837.07421875, 'close': 34356.25}, 'dia 58': {'open': 35271.36328125, 'high': 35271.36328125, 'low': 30681.49609375, 'close': 32061.552734375}, 'dia 57': {'open': 32309.6953125, 'high': 35276.90625, 'low': 32309.6953125, 'close': 34286.76171875}, 'dia 56': {'open': 33795.80078125, 'high': 36855.71875, 'low': 33795.80078125, 'close': 36855.71875}, 'dia 55': {'open': 37344.1796875, 'high': 37344.1796875, 'low': 35061.87890625, 'close': 35916.109375}, 'dia 54': {'open': 35945.04296875, 'high': 35945.04296875, 'low': 34241.5078125, 'close': 35023.17578125}, 'dia 53': {'open': 35071.44921875, 'high': 35746.84765625, 'low': 34820.34375, 'close': 35724.62890625}, 'dia 52': {'open': 35642.77734375, 'high': 35642.77734375, 'low': 34824.16015625, 'close': 34988.4296875}, 'dia 51': {'open': 35253.296875, 'high': 37191.40625, 'low': 35253.296875, 'close': 37148.30078125}, 'dia 50': {'open': 37515.015625, 'high': 37515.015625, 'low': 36595.80859375, 'close': 37021.140625}, 'dia 49': {'open': 37041.99609375, 'high': 37734.875, 'low': 36828.828125, 'close': 36828.828125}, 'dia 48': {'open': 36916.39453125, 'high': 37472.61328125, 'low': 36683.5859375, 'close': 37472.61328125}, 'dia 47': {'open': 37637.28125, 'high': 37807.4453125, 'low': 37232.3046875, 'close': 37491.14453125}, 'dia 46': {'open': 37302.2421875, 'high': 37328.76171875, 'low': 36546.828125, 'close': 36546.828125}, 'dia 45': {'open': 36619.00390625, 'high': 37421.5625, 'low': 36619.00390625, 'close': 37402.22265625}, 'dia 44': {'open': 37435.93359375, 'high': 39543.9453125, 'low': 37435.93359375, 'close': 39487.88671875}, 'dia 43': {'open': 39483.16796875, 'high': 39976.32421875, 'low': 39117.22265625, 'close': 39485.60546875}, 'dia 42': {'open': 39575.73828125, 'high': 40340.96484375, 'low': 39575.73828125, 'close': 40113.5234375}, 'dia 41': {'open': 39968.9765625, 'high': 40367.0546875, 'low': 39920.23828125, 'close': 40143.2734375}, 'dia 40': {'open': 40059.33203125, 'high': 40059.33203125, 'low': 39249.91796875, 'close': 39249.91796875}, 'dia 39': {'open': 39323.59765625, 'high': 39726.7890625, 'low': 39076.61328125, 'close': 39651.93359375}, 'dia 38': {'open': 39475.48046875, 'high': 39669.484375, 'low': 38352.55078125, 'close': 38513.453125}, 'dia 37': {'open': 38441.18359375, 'high': 38663.0390625, 'low': 37975.375, 'close': 38658.76953125}, 'dia 36': {'open': 38568.96875, 'high': 38827.09765625, 'low': 38002.7890625, 'close': 38002.7890625}, 'dia 35': {'open': 37859.4375, 'high': 38262.8515625, 'low': 37782.95703125, 'close': 38145.59375}, 'dia 34': {'open': 38109.453125, 'high': 38704.17578125, 'low': 38109.453125, 'close': 38704.17578125}, 'dia 33': {'open': 38711.265625, 'high': 38962.34765625, 'low': 38260.24609375, 'close': 38724.68359375}, 'dia 32': {'open': 38647.77734375, 'high': 38946.1875, 'low': 38303.19921875, 'close': 38946.1875}, 'dia 31': {'open': 39144.81640625, 'high': 39413.78125, 'low': 38976.0625, 'close': 39413.78125}, 'dia 30': {'open': 39353.5859375, 'high': 40066.24609375, 'low': 39353.5859375, 'close': 39786.87109375}, 'dia 29': {'open': 39818.49609375, 'high': 39818.49609375, 'low': 39202.8828125, 'close': 39202.8828125}, 'dia 28': {'open': 39160.6328125, 'high': 39249.58203125, 'low': 38471.30078125, 'close': 38723.42578125}, 'dia 27': {'open': 38494.484375, 'high': 38734.4296875, 'low': 38119.58203125, 'close': 38402.41796875}, 'dia 26': {'open': 38298.609375, 'high': 38741.64453125, 'low': 37849.48828125, 'close': 37849.48828125}, 'dia 25': {'open': 37783.4921875, 'high': 38033.6015625, 'low': 37174.859375, 'close': 37730.44140625}, 'dia 24': {'open': 37731.27734375, 'high': 38680.44921875, 'low': 37731.27734375, 'close': 38680.44921875}, 'dia 23': {'open': 38949.26171875, 'high': 38949.26171875, 'low': 38713.02734375, 'close': 38754.5703125}, 'dia 22': {'open': 38832.7578125, 'high': 39496.78125, 'low': 38382.42578125, 'close': 39485.9140625}, 'dia 21': {'open': 39526.375, 'high': 39526.375, 'low': 38950.44921875, 'close': 38954.8125}, 'dia 20': {'open': 39006.1328125, 'high': 39397.90625, 'low': 39006.1328125, 'close': 39397.90625}, 'dia 19': {'open': 39466.0546875, 'high': 39505.0859375, 'low': 39135.421875, 'close': 39317.09765625}, 'dia 18': {'open': 39169.3828125, 'high': 39196.1640625, 'low': 37975.50390625, 'close': 37975.50390625}, 'dia 17': {'open': 37968.3046875, 'high': 38217.328125, 'low': 37907.09375, 'close': 37985.17578125}, 'dia 16': {'open': 37901.484375, 'high': 38378.59375, 'low': 37901.484375, 'close': 37991.23046875}, 'dia 15': {'open': 37692.71875, 'high': 37692.71875, 'low': 36925.83984375, 'close': 37002.44140625}, 'dia 14': {'open': 36753.66796875, 'high': 37882.58984375, 'low': 36753.66796875, 'close': 37882.58984375}, 'dia 13': {'open': 37903.6796875, 'high': 38161.1328125, 'low': 37152.92578125, 'close': 37152.92578125}, 'dia 12': {'open': 37078.4453125, 'high': 37078.4453125, 'low': 35922.09375, 'close': 35922.09375}, 'dia 11': {'open': 35613.703125, 'high': 35957.37890625, 'low': 35050.6171875, 'close': 35662.51953125}, 'dia 10': {'open': 35822.3984375, 'high': 36686.82421875, 'low': 35726.76953125, 'close': 35920.98828125}, 'dia 9': {'open': 36125.125, 'high': 37360.7890625, 'low': 36125.125, 'close': 37360.7890625}, 'dia 8': {'open': 37260.08203125, 'high': 37359.9453125, 'low': 36933.40625, 'close': 36984.0078125}, 'dia 7': {'open': 36967.69921875, 'high': 37136.19140625, 'low': 36562.9921875, 'close': 37118.015625}, 'dia 6': {'open': 37044.32421875, 'high': 38010.6796875, 'low': 37044.32421875, 'close': 37962.48828125}, 'dia 5': {'open': 38061.0859375, 'high': 38061.0859375, 'low': 37787.6484375, 'close': 37972.87109375}, 'dia 4': {'open': 37921.63671875, 'high': 38170.953125, 'low': 37623.03515625, 'close': 37705.015625}, 'dia 3': {'open': 37867.84765625, 'high': 38255.17578125, 'low': 37858.6875, 'close': 38255.17578125}, 'dia 2': {'open': 38224.54296875, 'high': 38612.1171875, 'low': 38089.79296875, 'close': 38612.1171875}, 'dia 1': {'open': 38526.1015625, 'high': 38526.1015625, 'low': 38486.28515625, 'close': 38486.28515625}, 'dia 0': {'open': 38329.09765625, 'high': 38329.09765625, 'low': 38329.09765625, 'close': 38329.09765625}}}

recta = 32000
grosor = 500

while recta < 42100:
    contCumbres = 0
    contValles = 0

    for dia in range(len(btc["Diario"])):
        if recta < btc["Diario"][f"dia {dia}"]["open"] < recta + grosor:

            if dia == 0 or dia == 59:
                continue

            # si el dato es mas grande que el dato anterior y el proximo, entonces es cumbre
            if btc["Diario"][f"dia {dia - 1}"]["open"] < btc["Diario"][f"dia {dia}"]["open"] > btc["Diario"][f"dia {dia + 1}"]["open"]:
                contCumbres += 1

            elif btc["Diario"][f"dia {dia - 1}"]["open"] > btc["Diario"][f"dia {dia}"]["open"] < btc["Diario"][f"dia {dia + 1}"]["open"]:
                contValles += 1

    print("recta: ", recta)
    print("cumbres: ", contCumbres)
    print("valles: ", contValles)
    print()

    recta += grosor
    continue

# ---------------------------------

# # GRAFICO

# import matplotlib.pyplot as plt
# from matplotlib.pyplot import figure

# # Datos
# data = {'dia 205': {'open': 42902.5625, 'high': 43347.15625, 'low': 42567.94921875, 'close': 42626.359375}, 'dia 204': {'open': 42776.37109375, 'high': 43372.71484375, 'low': 42727.3515625, 'close': 43298.0234375}, 'dia 203': {'open': 43244.47265625, 'high': 43771.01953125, 'low': 43141.484375, 'close': 43734.1953125}, 'dia 202': {'open': 43704.203125, 'high': 43735.53515625, 'low': 43370.65234375, 'close': 43537.51171875}, 'dia 201': {'open': 43488.05859375, 'high': 44287.96484375, 'low': 43254.79296875, 'close': 44103.34765625}, 'dia 200': {'open': 44194.0078125, 'high': 44554.1171875, 'low': 44194.0078125, 'close': 44459.296875}, 'dia 199': {'open': 44483.234375, 'high': 44602.0390625, 'low': 44235.86328125, 'close': 44235.86328125}, 'dia 198': {'open': 44311.0546875, 'high': 44460.7109375, 'low': 44195.56640625, 'close': 44327.671875}, 'dia 197': {'open': 44391.2421875, 'high': 44927.36328125, 'low': 44345.80859375, 'close': 44906.5234375}, 'dia 196': {'open': 44979.828125, 'high': 45202.734375, 'low': 44761.51171875, 'close': 45174.16796875}, 'dia 195': {'open': 45118.81640625, 'high': 45118.81640625, 'low': 44794.7578125, 'close': 44894.62109375}, 'dia 194': {'open': 44948.35546875, 'high': 45124.40625, 'low': 44914.53125, 'close': 45007.71484375}, 'dia 193': {'open': 45064.375, 'high': 45152.81640625, 'low': 44724.50390625, 'close': 44724.50390625}, 'dia 192': {'open': 44671.3828125, 'high': 44729.79296875, 'low': 44585.49609375, 'close': 44623.8828125}, 'dia 191': {'open': 44670.109375, 'high': 44989.33984375, 'low': 44670.109375, 'close': 44946.73828125}, 'dia 190': {'open': 44985.6171875, 'high': 45120.1796875, 'low': 44913.52734375, 'close': 45023.7578125}, 'dia 189': {'open': 45029.8671875, 'high': 45038.1171875, 'low': 44806.31640625, 'close': 44807.90234375}, 'dia 188': {'open': 44873.99609375, 'high': 44925.1875, 'low': 44721.44140625, 'close': 44833.8203125}, 'dia 187': {'open': 44948.89453125, 'high': 45025.25390625, 'low': 44692.43359375, 'close': 44723.19140625}, 'dia 186': {'open': 44708.5078125, 
# 'high': 44833.74609375, 'low': 44704.24609375, 'close': 44738.5390625}, 'dia 185': {'open': 44781.19921875, 'high': 45284.73046875, 'low': 44781.19921875, 'close': 45202.578125}, 'dia 184': {'open': 45191.30078125, 'high': 45191.30078125, 'low': 45011.4921875, 'close': 45077.4921875}, 'dia 183': {'open': 45043.109375, 'high': 45460.7109375, 'low': 45043.109375, 'close': 45460.7109375}, 'dia 182': {'open': 45476.0078125, 'high': 45534.3046875, 'low': 45281.1875, 'close': 45299.50390625}, 'dia 181': {'open': 45319.24609375, 'high': 45473.17578125, 'low': 45246.6953125, 'close': 45381.1875}, 'dia 180': {'open': 45379.37109375, 'high': 45429.140625, 'low': 45228.8359375, 'close': 45228.8359375}, 'dia 179': 
# {'open': 45257.19140625, 'high': 45409.72265625, 'low': 45119.76171875, 'close': 45409.72265625}, 'dia 178': {'open': 45410.00390625, 'high': 45410.00390625, 'low': 45209.28515625, 'close': 45405.08984375}, 'dia 177': {'open': 45406.63671875, 'high': 45745.0703125, 'low': 45388.703125, 'close': 45745.0703125}, 'dia 176': {'open': 45800.62890625, 'high': 
# 45812.45703125, 'low': 45468.703125, 'close': 45519.1328125}, 'dia 175': {'open': 45534.48046875, 'high': 45534.48046875, 'low': 45208.14453125, 'close': 45281.16796875}, 'dia 174': {'open': 45300.16015625, 'high': 45399.796875, 'low': 44902.265625, 'close': 45006.02734375}, 'dia 173': {'open': 44961.48828125, 'high': 45146.95703125, 'low': 44961.48828125, 'close': 45027.453125}, 'dia 172': {'open': 45005.41796875, 'high': 45227.97265625, 'low': 45005.41796875, 'close': 45097.75}, 'dia 171': {'open': 45096.8671875, 'high': 45243.875, 'low': 45011.640625, 'close': 45086.06640625}, 'dia 170': {'open': 45125.61328125, 'high': 45227.5, 'low': 44999.75, 'close': 45222.203125}, 'dia 169': {'open': 45234.09375, 'high': 45333.5859375, 'low': 45111.03125, 'close': 45284.85546875}, 'dia 168': {'open': 45314.26171875, 'high': 45439.04296875, 'low': 45254.66015625, 'close': 45404.97265625}, 'dia 167': {'open': 45386.21875, 'high': 45386.21875, 'low': 45123.25390625, 'close': 45123.25390625}, 'dia 166': {'open': 45076.609375, 'high': 45138.89453125, 'low': 44961.8046875, 'close': 45116.1796875}, 'dia 165': {'open': 45031.6796875, 'high': 45075.66796875, 'low': 44842.203125, 'close': 44942.80859375}, 'dia 164': {'open': 44859.57421875, 'high': 44970.046875, 'low': 44743.46484375, 'close': 44962.390625}, 'dia 163': {'open': 44931.08203125, 'high': 45061.80078125, 'low': 44874.3359375, 'close': 45020.96484375}, 'dia 162': {'open': 45010.57421875, 'high': 45104.7890625, 'low': 44903.09375, 'close': 45073.44140625}, 'dia 161': {'open': 45000.1796875, 'high': 45085.765625, 'low': 44857.2890625, 'close': 44941.1640625}, 'dia 160': {'open': 44971.69140625, 'high': 45308.59765625, 'low': 44971.69140625, 'close': 45219.16015625}, 'dia 159': {'open': 45210.34375, 'high': 45488.26953125, 'low': 45210.34375, 'close': 45402.4140625}, 'dia 158': {'open': 45402.1015625, 'high': 45402.734375, 'low': 45278.52734375, 'close': 45378.05859375}, 'dia 157': {'open': 45425.47265625, 'high': 45434.69140625, 'low': 45263.0234375, 'close': 45279.6171875}, 'dia 156': {'open': 45310.28125, 'high': 45568.0078125, 'low': 45275.78515625, 'close': 45547.60546875}, 'dia 155': {'open': 45596.69921875, 'high': 45670.5, 'low': 45506.11328125, 'close': 45535.1171875}, 'dia 154': {'open': 45485.4453125, 'high': 45688.28125, 
# 'low': 45440.2109375, 'close': 45440.2109375}, 'dia 153': {'open': 45370.9140625, 'high': 45370.9140625, 'low': 44928.75390625, 'close': 45068.41015625}, 'dia 152': {'open': 45043.75390625, 'high': 45150.45703125, 'low': 44809.80078125, 'close': 44854.765625}, 'dia 151': {'open': 44768.65234375, 'high': 44874.15625, 'low': 44316.7265625, 'close': 44316.7265625}, 'dia 150': {'open': 44286.76171875, 'high': 44356.08203125, 'low': 43847.67578125, 'close': 44030.40234375}, 'dia 149': {'open': 44056.66015625, 'high': 44146.515625, 'low': 43952.59765625, 'close': 43952.59765625}, 'dia 148': {'open': 43813.51953125, 'high': 43813.51953125, 'low': 43445.1640625, 'close': 43626.4765625}, 'dia 147': {'open': 43690.9609375, 'high': 43893.859375, 'low': 43690.9609375, 'close': 43893.859375}, 'dia 146': {'open': 43988.5859375, 'high': 43988.5859375, 'low': 43685.04296875, 'close': 43829.484375}, 'dia 145': {'open': 43816.58203125, 'high': 43816.58203125, 'low': 43035.875, 'close': 43283.6640625}, 'dia 144': {'open': 43168.703125, 'high': 43467.6015625, 'low': 43168.703125, 'close': 43291.84375}, 'dia 143': {'open': 43351.03125, 'high': 43351.03125, 'low': 42793.0234375, 'close': 42997.0078125}, 'dia 142': {'open': 43051.328125, 'high': 43358.078125, 'low': 42832.11328125, 'close': 43310.23046875}, 'dia 141': {'open': 43314.83203125, 'high': 43670.75390625, 'low': 42970.3203125, 'close': 43516.6015625}, 'dia 140': 
# {'open': 43645.625, 'high': 43768.1953125, 'low': 43504.59375, 'close': 43768.1953125}, 'dia 139': {'open': 43743.734375, 'high': 43743.734375, 'low': 43136.7109375, 'close': 43136.7109375}, 'dia 138': {'open': 43167.8828125, 'high': 43303.484375, 'low': 42975.34375, 'close': 43076.44140625}, 'dia 137': {'open': 43095.8515625, 'high': 43421.23828125, 'low': 42778.73046875, 'close': 42778.73046875}, 'dia 136': {'open': 42767.2109375, 'high': 43196.8515625, 'low': 42767.2109375, 'close': 43093.8515625}, 'dia 135': {'open': 43437.08984375, 'high': 43504.6953125, 'low': 43177.26171875, 'close': 43504.6953125}, 'dia 134': {'open': 43526.734375, 'high': 43696.734375, 'low': 43447.953125, 'close': 43686.390625}, 'dia 133': {'open': 43666.32421875, 'high': 43717.390625, 'low': 43448.27734375, 'close': 43667.13671875}, 'dia 132': {'open': 43682.05078125, 'high': 43858.7109375, 'low': 43509.09375, 'close': 43853.515625}, 'dia 131': {'open': 43861.265625, 'high': 43861.265625, 'low': 43618.734375, 'close': 43695.03515625}, 'dia 130': {'open': 43674.53125, 'high': 43674.53125, 'low': 43416.34765625, 'close': 43446.375}, 'dia 129': {'open': 43443.16796875, 'high': 43443.16796875, 'low': 42855.61328125, 'close': 43064.7265625}, 'dia 128': {'open': 43007.234375, 'high': 43071.37109375, 'low': 42808.98046875, 'close': 42986.94140625}, 'dia 127': {'open': 42985.51953125, 'high': 43098.80078125, 'low': 42499.14453125, 
# 'close': 42786.08984375}, 'dia 126': {'open': 42787.375, 'high': 42893.9375, 'low': 42550.63671875, 'close': 42893.9375}, 'dia 125': {'open': 42876.10546875, 'high': 43049.17578125, 'low': 42723.140625, 'close': 42866.90234375}, 'dia 124': {'open': 42694.62890625, 'high': 42984.66796875, 'low': 42636.4765625, 'close': 42780.56640625}, 'dia 123': {'open': 42742.62109375, 'high': 43289.57421875, 'low': 42742.62109375, 'close': 43289.57421875}, 'dia 122': {'open': 43412.33984375, 'high': 43609.00390625, 'low': 43252.78125, 'close': 43304.98046875}, 'dia 121': {'open': 43266.09375, 'high': 43286.1953125, 'low': 42929.04296875, 'close': 42929.04296875}, 'dia 120': {'open': 42934.0234375, 'high': 43528.4921875, 'low': 42848.64453125, 'close': 43528.4921875}, 'dia 119': {'open': 43469.578125, 'high': 43469.578125, 'low': 43211.640625, 'close': 43334.59765625}, 'dia 118': {'open': 43325.4921875, 'high': 43500.984375, 'low': 43219.6640625, 'close': 43308.0390625}, 'dia 117': {'open': 43289.2578125, 'high': 43506.58984375, 'low': 43289.2578125, 'close': 43404.23046875}, 'dia 116': {'open': 43386.1015625, 'high': 43386.1015625, 'low': 43027.91796875, 'close': 43276.4375}, 'dia 115': {'open': 43290.83203125, 'high': 43290.83203125, 'low': 43025.89453125, 'close': 43025.89453125}, 'dia 114': {'open': 42953.0859375, 'high': 43093.3515625, 'low': 42843.875, 'close': 42982.5859375}, 'dia 113': {'open': 43005.65625, 'high': 43091.2421875, 'low': 42796.42578125, 'close': 43052.59375}, 'dia 112': {'open': 42967.3125, 'high': 43161.171875, 'low': 42967.3125, 'close': 43161.171875}, 'dia 111': {'open': 43164.14453125, 'high': 43270.88671875, 'low': 43135.1484375, 'close': 43183.8671875}, 'dia 110': {'open': 43285.87109375, 'high': 43285.87109375, 'low': 42861.234375, 'close': 42861.234375}, 'dia 109': {'open': 42857.3828125, 'high': 42857.3828125, 'low': 42367.83203125, 'close': 42486.03125}, 'dia 108': {'open': 42479.29296875, 'high': 42830.6484375, 'low': 42479.29296875, 'close': 42830.6484375}, 'dia 107': {'open': 42872.28515625, 'high': 42872.28515625, 'low': 42518.98046875, 'close': 42740.30859375}, 'dia 106': {'open': 42728.95703125, 'high': 43175.98046875, 'low': 42602.15234375, 'close': 42909.40234375}, 'dia 105': {'open': 42944.9765625, 'high': 43546.1171875, 'low': 42604.40625, 'close': 43546.1171875}, 'dia 104': {'open': 43459.60546875, 'high': 43459.60546875, 'low': 43230.51171875, 'close': 43255.12109375}, 'dia 103': {'open': 43281.6015625, 'high': 43281.6015625, 'low': 42759.86328125, 'close': 42898.48046875}, 'dia 102': {'open': 42904.6796875, 'high': 42904.6796875, 'low': 42703.09765625, 'close': 42703.09765625}, 'dia 101': {'open': 42612.9296875, 'high': 42647.625, 'low': 42426.0234375, 'close': 42436.6171875}, 'dia 100': {'open': 42373.38671875, 'high': 42373.38671875, 'low': 41535.79296875, 'close': 41659.75390625}, 'dia 99': {'open': 41543.55078125, 'high': 41698.60546875, 'low': 41174.3203125, 'close': 41399.453125}, 'dia 98': {'open': 41270.51171875, 'high': 41270.51171875, 'low': 40625.1484375, 'close': 40890.546875}, 'dia 97': {'open': 40910.65625, 'high': 41286.79296875, 'low': 40910.65625, 'close': 41043.7578125}, 'dia 96': {'open': 40889.83984375, 'high': 41026.0703125, 'low': 40720.09765625, 'close': 40915.578125}, 'dia 95': {'open': 40917.90234375, 'high': 41125.33984375, 'low': 40836.625, 'close': 41000.4140625}, 'dia 94': {'open': 41144.24609375, 'high': 41144.24609375, 'low': 40553.0234375, 'close': 40553.0234375}, 'dia 93': {'open': 40372.78125, 'high': 40808.6796875, 'low': 40177.64453125, 'close': 40653.08203125}, 'dia 92': {'open': 40608.66015625, 'high': 41038.9765625, 'low': 40508.72265625, 'close': 41003.546875}, 'dia 91': {'open': 41005.22265625, 'high': 41005.22265625, 'low': 40726.375, 'close': 40726.375}, 'dia 90': {'open': 40647.96875, 'high': 40780.6953125, 'low': 40500.89453125, 'close': 40607.796875}, 'dia 89': {'open': 40567.21484375, 'high': 40828.140625, 'low': 40470.98828125, 'close': 40541.55859375}, 'dia 88': {'open': 40440.828125, 'high': 40440.828125, 'low': 39594.87890625, 'close': 39679.95703125}, 'dia 87': {'open': 39594.8359375, 'high': 40068.953125, 'low': 39034.078125, 'close': 39034.078125}, 'dia 86': {'open': 39310.9765625, 'high': 39479.94140625, 'low': 38717.16015625, 'close': 39194.125}, 'dia 85': {'open': 39246.57421875, 'high': 39788.125, 'low': 39246.57421875, 'close': 39788.125}, 'dia 84': {'open': 39801.1171875, 'high': 39828.36328125, 'low': 39492.8515625, 'close': 39689.4375}, 'dia 83': {'open': 39734.20703125, 'high': 39734.20703125, 'low': 39103.94140625, 'close': 39103.94140625}, 'dia 82': {'open': 39155.0546875, 'high': 39468.09375, 'low': 39064.33984375, 'close': 39380.44140625}, 'dia 81': {'open': 39287.66796875, 'high': 39838.76953125, 'low': 39287.66796875, 
# 'close': 39838.76953125}, 'dia 80': {'open': 39841.00390625, 'high': 39841.00390625, 'low': 39639.34765625, 'close': 39829.88671875}, 'dia 79': {'open': 39828.5234375, 'high': 39828.5234375, 'low': 39514.21484375, 'close': 39589.421875}, 'dia 78': {'open': 39520.52734375, 'high': 39520.52734375, 'low': 39175.91015625, 'close': 39245.9296875}, 'dia 77': {'open': 39370.0625, 'high': 39633.82421875, 'low': 39089.2421875, 'close': 39111.15625}, 'dia 76': {'open': 38957.2421875, 'high': 39534.93359375, 'low': 38856.3984375, 'close': 
# 39412.39453125}, 'dia 75': {'open': 39473.32421875, 'high': 40183.66015625, 'low': 39429.55859375, 'close': 40183.66015625}, 'dia 74': {'open': 40064.09375, 'high': 40429.078125, 'low': 40064.09375, 'close': 40359.40625}, 'dia 73': {'open': 40407.609375, 'high': 40407.609375, 'low': 40121.34765625, 'close': 40147.28125}, 'dia 72': {'open': 40201.1875, 'high': 40276.3984375, 'low': 39976.0859375, 'close': 40189.73046875}, 'dia 71': {'open': 40281.078125, 'high': 40498.55859375, 'low': 40205.703125, 'close': 40435.25}, 'dia 70': {'open': 40439.390625, 'high': 40722.66796875, 'low': 40337.5546875, 'close': 40499.3515625}, 'dia 69': {'open': 40501.140625, 'high': 40725.1171875, 'low': 40498.640625, 'close': 40534.62890625}, 'dia 68': {'open': 40507.9765625, 'high': 40507.9765625, 'low': 40184.14453125, 'close': 40184.14453125}, 'dia 67': {'open': 40222.25, 'high': 40423.2734375, 'low': 40183.61328125, 'close': 40280.4140625}, 'dia 66': {'open': 40174.125, 'high': 40425.08984375, 'low': 40123.828125, 'close': 40425.08984375}, 'dia 65': {'open': 40394.015625, 'high': 40426.1953125, 'low': 39752.38671875, 'close': 39752.38671875}, 'dia 64': {'open': 39803.8671875, 'high': 39803.8671875, 'low': 39552.34375, 'close': 39631.2421875}, 'dia 63': {'open': 39641.07421875, 'high': 39641.07421875, 'low': 39035.38671875, 'close': 39197.16796875}, 'dia 62': {'open': 39176.8515625, 'high': 39470.4375, 'low': 38982.96484375, 'close': 39415.26171875}, 'dia 61': {'open': 39387.765625, 'high': 39406.06640625, 'low': 39233.15234375, 'close': 39324.0390625}, 'dia 60': {'open': 39378.61328125, 'high': 39378.61328125, 'low': 38179.1484375, 'close': 38386.11328125}, 'dia 59': {'open': 38153.3359375, 'high': 38563.91015625, 'low': 36553.53515625, 'close': 38459.0859375}, 'dia 58': {'open': 38377.625, 'high': 38795.3203125, 'low': 37962.8125, 'close': 38617.3515625}, 'dia 57': {'open': 38596.4921875, 'high': 39011.59375, 'low': 38481.484375, 'close': 38626.03515625}, 'dia 56': {'open': 38674.2734375, 'high': 38709.84375, 'low': 38214.359375, 'close': 38214.359375}, 'dia 55': {'open': 38334.51171875, 'high': 38334.51171875, 'low': 37054.39453125, 'close': 37054.39453125}, 'dia 54': {'open': 36591.3828125, 'high': 37033.96484375, 'low': 32837.07421875, 'close': 34356.25}, 'dia 53': {'open': 35271.36328125, 'high': 35271.36328125, 'low': 30681.49609375, 'close': 32061.552734375}, 'dia 52': {'open': 32309.6953125, 'high': 35276.90625, 'low': 32309.6953125, 'close': 34286.76171875}, 'dia 51': {'open': 33795.80078125, 'high': 36855.71875, 'low': 33795.80078125, 'close': 36855.71875}, 'dia 50': {'open': 37344.1796875, 'high': 37344.1796875, 'low': 35061.87890625, 'close': 35916.109375}, 'dia 49': {'open': 35945.04296875, 'high': 35945.04296875, 'low': 34241.5078125, 'close': 35023.17578125}, 'dia 48': {'open': 35071.44921875, 'high': 35746.84765625, 'low': 34820.34375, 'close': 35724.62890625}, 'dia 47': {'open': 35642.77734375, 'high': 35642.77734375, 'low': 34824.16015625, 'close': 34988.4296875}, 'dia 46': {'open': 35253.296875, 'high': 37191.40625, 'low': 35253.296875, 'close': 37148.30078125}, 'dia 45': {'open': 37515.015625, 'high': 37515.015625, 'low': 36595.80859375, 'close': 37021.140625}, 'dia 44': {'open': 37041.99609375, 'high': 37734.875, 'low': 36828.828125, 'close': 36828.828125}, 'dia 43': {'open': 36916.39453125, 'high': 37472.61328125, 'low': 36683.5859375, 'close': 37472.61328125}, 'dia 42': {'open': 37637.28125, 'high': 37807.4453125, 'low': 37232.3046875, 'close': 37491.14453125}, 'dia 41': {'open': 37302.2421875, 'high': 37328.76171875, 'low': 36546.828125, 'close': 36546.828125}, 'dia 40': {'open': 36619.00390625, 'high': 37421.5625, 'low': 36619.00390625, 'close': 37402.22265625}, 'dia 39': {'open': 37435.93359375, 'high': 39543.9453125, 'low': 37435.93359375, 'close': 39487.88671875}, 'dia 38': {'open': 39483.16796875, 'high': 39976.32421875, 'low': 39117.22265625, 'close': 39485.60546875}, 'dia 37': {'open': 39575.73828125, 'high': 40340.96484375, 'low': 39575.73828125, 'close': 40113.5234375}, 'dia 36': {'open': 39968.9765625, 'high': 40367.0546875, 'low': 39920.23828125, 'close': 40143.2734375}, 'dia 35': {'open': 40059.33203125, 'high': 40059.33203125, 'low': 39249.91796875, 'close': 39249.91796875}, 
# 'dia 34': {'open': 39323.59765625, 'high': 39726.7890625, 'low': 39076.61328125, 'close': 39651.93359375}, 'dia 33': {'open': 39475.48046875, 'high': 39669.484375, 'low': 38352.55078125, 'close': 38513.453125}, 'dia 32': {'open': 38441.18359375, 'high': 38663.0390625, 'low': 37975.375, 'close': 38658.76953125}, 'dia 31': {'open': 38568.96875, 'high': 38827.09765625, 'low': 38002.7890625, 'close': 38002.7890625}, 'dia 30': {'open': 37859.4375, 'high': 38262.8515625, 'low': 37782.95703125, 'close': 38145.59375}, 'dia 29': {'open': 38109.453125, 'high': 38704.17578125, 'low': 38109.453125, 'close': 38704.17578125}, 'dia 28': {'open': 38711.265625, 'high': 38962.34765625, 'low': 38260.24609375, 'close': 38724.68359375}, 'dia 27': {'open': 38647.77734375, 'high': 38946.1875, 'low': 38303.19921875, 'close': 38946.1875}, 'dia 26': {'open': 39144.81640625, 'high': 39413.78125, 'low': 38976.0625, 'close': 39413.78125}, 'dia 25': {'open': 39353.5859375, 'high': 40066.24609375, 'low': 39353.5859375, 'close': 39786.87109375}, 'dia 24': {'open': 39818.49609375, 'high': 39818.49609375, 'low': 39202.8828125, 'close': 39202.8828125}, 'dia 23': {'open': 39160.6328125, 'high': 39249.58203125, 'low': 38471.30078125, 'close': 38723.42578125}, 'dia 22': {'open': 38494.484375, 'high': 38734.4296875, 'low': 38119.58203125, 'close': 38402.41796875}, 'dia 21': {'open': 38298.609375, 'high': 38741.64453125, 'low': 37849.48828125, 'close': 37849.48828125}, 'dia 20': {'open': 37783.4921875, 'high': 38033.6015625, 'low': 37174.859375, 'close': 37730.44140625}, 'dia 19': {'open': 37731.27734375, 'high': 37731.27734375, 'low': 37731.27734375, 'close': 37731.27734375}, 'dia 18': {'open': None, 'high': None, 'low': None, 'close': None}, 'dia 17': {'open': None, 'high': None, 'low': 
# None, 'close': None}, 'dia 16': {'open': None, 'high': None, 'low': None, 'close': None}, 'dia 15': {'open': None, 'high': None, 'low': None, 'close': None}, 'dia 14': {'open': None, 'high': None, 'low': None, 'close': None}, 'dia 13': {'open': 39169.3828125, 'high': 39196.1640625, 'low': 37975.50390625, 'close': 37975.50390625}, 'dia 12': {'open': 37968.3046875, 'high': 38217.328125, 'low': 37907.09375, 'close': 37985.17578125}, 'dia 11': {'open': 37901.484375, 'high': 38378.59375, 'low': 37901.484375, 'close': 37991.23046875}, 'dia 10': {'open': 37692.71875, 'high': 37692.71875, 'low': 36925.83984375, 'close': 37002.44140625}, 'dia 9': {'open': 36753.66796875, 'high': 37882.58984375, 'low': 36753.66796875, 'close': 37882.58984375}, 'dia 8': {'open': 37903.6796875, 'high': 38161.1328125, 'low': 37152.92578125, 'close': 37152.92578125}, 'dia 7': {'open': 37078.4453125, 'high': 
# 37078.4453125, 'low': 35922.09375, 'close': 35922.09375}, 'dia 6': {'open': 35613.703125, 'high': 35957.37890625, 'low': 35050.6171875, 'close': 35662.51953125}, 'dia 5': {'open': 35822.3984375, 'high': 36686.82421875, 'low': 35726.76953125, 'close': 35920.98828125}, 'dia 4': {'open': 36125.125, 'high': 37360.7890625, 'low': 36125.125, 'close': 37360.7890625}, 'dia 3': {'open': 37260.08203125, 'high': 37359.9453125, 'low': 36933.40625, 'close': 36984.0078125}, 'dia 2': {'open': 36967.69921875, 'high': 37136.19140625, 'low': 36562.9921875, 'close': 37118.015625}, 'dia 1': {'open': 37044.32421875, 'high': 37403.140625, 'low': 37044.32421875, 'close': 37369.16796875}, 'dia 0': {'open': 37646.41796875, 'high': 37646.41796875, 'low': 37646.41796875, 'close': 37646.41796875}}


# # Ejes
# ejeX = []
# ejeY = []
# recta = []


# # Datos del ejeY
# for dia in data:
#     if data[dia]["open"] == None:
#         data[dia]["open"] = 0
#     ejeY.append(data[dia]["open"])


# # Datos del ejeX
# for i in range(len(ejeY)):
#     ejeX.append(i+1)
#     recta.append(40000)
    
    
# # Plot
# fig, ax = plt.subplots()  # Create a figure and an axes.
# ax.plot(ejeX, ejeY)
# ax.plot(ejeX, recta)
# figure(figsize=(20, 7), dpi=80)
